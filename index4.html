<html>
    <head>
        <meta http-equiv="content-type" content="text/html;charset=utf-8">
        <title>Oprava jmen</title>
    </head>

    <body>
      <h3>A demonstration of how to access a Text Field</h3>

<textarea rows="8" cols="50" id="myText">Sem vložte jména </textarea>

<p>Click the "Try it" button to get the text in the text field.</p>

<button onclick="opravitJmena()">Opravit jména</button>

<p id="prostorNaJmena"></p>

        <script>
        novySeznamJmen = "";

        function opravitJmena() {
          var vlozenaJmena = document.getElementById("myText").value;
          var jmena = vlozenaJmena.split("\n");

          console.log(jmena);
          // var jmena = ["Mudr. Jan Lakomý, Ph.D., MBA, CSc.", "Bc. Pavel Studený", "Prof. MUDr. Miloš Táborský, CSc., FESC, MBA", "prof. MUDr. Roman Havlík, Ph.D.", "Ing. Čeněk Merta, MBA"]
          for (i = 0; i < jmena.length; i++) {
              var aktualniJmeno = jmena[i];
              aktualniJmeno = aktualniJmeno.toLocaleLowerCase();

              // opakování protože nevím jak najít a nahradit všechny tečky, čárky a mezery
              for (t = 0; t < 10; t++) {
                aktualniJmeno = aktualniJmeno.replace("ph.d", " ph");
                aktualniJmeno = aktualniJmeno.replace("phd", " ph");
                aktualniJmeno = aktualniJmeno.replace(",", " ");
                aktualniJmeno = aktualniJmeno.replace(".", " ");
                aktualniJmeno = aktualniJmeno.replace("  ", " ");
              }

              console.log(aktualniJmeno);

              // rozdělení jména do array
              var aktualniJmeno = aktualniJmeno.split(" ");
              console.log(aktualniJmeno);

              // funkce na obě výměny
              function prepsatVsechnyTituly(hledane, opravene, sestava) {
                for (n = 0; n < hledane.length; n++) {
                  if (aktualniJmeno.includes(hledane[n])) {
                    sestava += opravene[n];
                    aktualniJmeno.splice(aktualniJmeno.indexOf(hledane[n]), 1);
                    return sestava;
                  }
                }
              }

              // tituly před jmény
              var hledejTituly1 = ["prof", "doc", "ing", "mgr", "mudr", "bc"];
              var opraveneTituly1 = ["prof. ", "doc. ", "Ing. ", "Mgr. ", "MUDr. ", "Bc. "];
              var sestaveniPredJmenem = "";

              for (n = 0; n < hledejTituly1.length; n++) {
                if (aktualniJmeno.includes(hledejTituly1[n])) {
                  sestaveniPredJmenem += opraveneTituly1[n];
                  aktualniJmeno.splice(aktualniJmeno.indexOf(hledejTituly1[n]), 1);
                }
              }

              // tituly za jmény
              var hledejTituly2 = ["dis", "ph", "csc", "fesc", "facc", "mba", "mha"];
              var opraveneTituly2 = [", DiS", ", Ph.D.", ", CSc.", ", FESC", ", FACC", ", MBA", ", MHA"];
              var sestaveniZaJmenem = "";

              for (n = 0; n < hledejTituly2.length; n++) {
                if (aktualniJmeno.includes(hledejTituly2[n])) {
                  sestaveniZaJmenem += opraveneTituly2[n];
                  aktualniJmeno.splice(aktualniJmeno.indexOf(hledejTituly2[n]), 1);
                }
              }

              //přídat jméno
              konecnyVysledek = sestaveniPredJmenem + aktualniJmeno[0].charAt(0).toUpperCase() + aktualniJmeno[0].slice(1) + " " + aktualniJmeno[1].charAt(0).toUpperCase() + aktualniJmeno[1].slice(1) + sestaveniZaJmenem;
              novySeznamJmen += konecnyVysledek + " <br>";
          }

          document.getElementById("prostorNaJmena").innerHTML = novySeznamJmen;

        }

        </script>
    </body>
</html>
