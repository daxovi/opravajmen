<html>
    <head>
        <meta http-equiv="content-type" content="text/html;charset=utf-8">
        <title>Oprava jmen</title>
    </head>

    <body>
      <h3>A demonstration of how to access a Text Field</h3>

<textarea rows="8" cols="50" id="myText">Sem vložte jména </textarea>

<p>Click the "Try it" button to get the text in the text field.</p>

<button onclick="opravitJmena(true)">Opravit jména</button>

<p id="prostorNaJmena"></p>

        <script>
        function opravitJmena(poradi) {
          var konecnyVysledek = [];
          var vlozenaJmena = document.getElementById("myText").value;
          var jmena = vlozenaJmena.split("\n");

          console.log(jmena);
          // var jmena = ["Mudr. Jan Lakomý, Ph.D., MBA, CSc.", "Bc. Pavel Studený", "Prof. MUDr. Miloš Táborský, CSc., FESC, MBA", "prof. MUDr. Roman Havlík, Ph.D.", "Ing. Čeněk Merta, MBA"]
          for (i = 0; i < jmena.length; i++) {
              var aktualniJmeno = jmena[i];
              // opakování protože nevím jak najít a nahradit všechny tečky, čárky a mezery
              for (t = 0; t < 10; t++) {
                  aktualniJmeno = aktualniJmeno.replace(",", " ");
                  aktualniJmeno = aktualniJmeno.replace(".", " ");
                  aktualniJmeno = aktualniJmeno.replace("  ", " ");
                  aktualniJmeno = aktualniJmeno.replace("  ", " ");
              }
              aktualniJmeno = aktualniJmeno.toLocaleLowerCase();

              console.log(aktualniJmeno);
              // rozdělení jména do array

              var mudr = "";
              var mgr = "";
              var bc = "";
              var ing = "";
              var prof = "";
              var doc = "";
              var csc = "";
              var fesc = "";
              var mba = "";
              var dis = "";
              var phd = "";
              var facc = "";

              var aktualniJmeno = aktualniJmeno.split(" ");
              console.log(aktualniJmeno);
              if (aktualniJmeno.includes("mudr")) {
                  mudr = "MUDr. ";
                  aktualniJmeno.splice(aktualniJmeno.indexOf("mudr"), 1);
                  console.log(mudr);
              }
              if (aktualniJmeno.includes("mgr")) {
                  mgr = "Mgr. ";
                  aktualniJmeno.splice(aktualniJmeno.indexOf("mgr"), 1);
                  console.log(mgr);
              }
              if (aktualniJmeno.includes("bc")) {
                  bc = "Bc. ";
                  aktualniJmeno.splice(aktualniJmeno.indexOf("bc"), 1);
                  console.log(bc);
              }
              if (aktualniJmeno.includes("ing")) {
                  ing = "Ing. "
                  aktualniJmeno.splice(aktualniJmeno.indexOf("ing"), 1);
                  console.log(ing);
              }
              if (aktualniJmeno.includes("prof")) {
                  prof = "prof. ";
                  aktualniJmeno.splice(aktualniJmeno.indexOf("prof"), 1);
                  console.log(prof);
              }
              if (aktualniJmeno.includes("doc")) {
                doc = "doc. ";
                aktualniJmeno.splice(aktualniJmeno.indexOf("doc"), 1);
                console.log(doc);
              }
              if (aktualniJmeno.includes("csc")) {
                csc = ", CSc.";
                aktualniJmeno.splice(aktualniJmeno.indexOf("csc"), 1);
                console.log(csc);
              }
              if (aktualniJmeno.includes("fesc")) {
                fesc = ", FESC";
                aktualniJmeno.splice(aktualniJmeno.indexOf("fesc"), 1);
                console.log(fesc);
              }
              if (aktualniJmeno.includes("mba")) {
                mba = ", MBA";
                aktualniJmeno.splice(aktualniJmeno.indexOf("mba"), 1);
                console.log(mba);
              }
              if (aktualniJmeno.includes("dis")) {
                dis = ", DiS.";
                aktualniJmeno.splice(aktualniJmeno.indexOf("dis"), 1);
                console.log(dis);
              }
              if (aktualniJmeno.includes("ph")) {
                dis = ", Ph.D.";
                aktualniJmeno.splice(aktualniJmeno.indexOf("ph"), 2);
                console.log(phd);
              }
              if (aktualniJmeno.includes("facc")) {
                facc = ", FACC";
                aktualniJmeno.splice(aktualniJmeno.indexOf("facc"), 1);
                console.log(phd);
              }
              if (aktualniJmeno.includes(" ")) {
                aktualniJmeno.splice(aktualniJmeno.indexOf(" "), 1);
                console.log("byla tam mezera");
              }
              if (aktualniJmeno.includes("")) {
                aktualniJmeno.splice(aktualniJmeno.indexOf(""), 1);
                console.log("bylo tam prazdne pole");
              }

              var jmeno = aktualniJmeno[0].charAt(0).toUpperCase() + aktualniJmeno[0].slice(1);;
              var prijmeni = aktualniJmeno[1].charAt(0).toUpperCase() + aktualniJmeno[1].slice(1);


              console.log("Co ze jména zbylo? " + aktualniJmeno);

              console.log("\n");

              if (poradi) {
                var vysledek = prof + doc + mudr + mgr+ ing + bc + jmeno + " " + prijmeni + dis + phd + csc + fesc + facc + mba + "<br>";
              }
              if (!poradi) {
                var vysledek = prof + doc + mudr + mgr + ing + bc + prijmeni + " " + jmeno + dis + phd + csc + fesc + facc + mba + "<br>";
              }
              konecnyVysledek.push(vysledek);
          }

          konecnyVysledek = konecnyVysledek.join(" ")


          document.getElementById("prostorNaJmena").innerHTML = konecnyVysledek;

        }

        </script>
    </body>
</html>
